# VPN Mobile Assistant (React Native + Expo)

Простое мобильное приложение для водителей транспортной компании. Помогает подключаться к корпоративному VPN, смотреть инструкции и быстро обращаться в поддержку. Реализовано на **React Native + Expo + TypeScript** с акцентом на понятный интерфейс.

## Стек
- Expo (последняя стабильная)
- React Native + TypeScript (строгая типизация)
- React Navigation (стек + нижние табы)
- React Native Paper (UI-компоненты, готовые темы)
- AsyncStorage (локальное хранение)

### Почему React Native Paper?
- Готовые MD3-компоненты с крупной типографикой и понятными состояниями.
- Отличная интеграция с Expo (без нативных патчей) и поддержка тем по умолчанию.
- Единый источник цветов и шрифтов, что упрощает поддержку доступного UI для водителей.

## Структура проекта
```
src/
  screens/              // Экранные модули приложения
    Onboarding/         // Первичный показ слайдов
    Login/              // Форма авторизации/идентификации
    Home/               // Главный экран со статусами и быстрыми действиями
    Profile/            // Просмотр данных водителя и VPN-параметров
    Instructions/       // Пошаговая инструкция по подключению
    Settings/           // Тема, флаги показа инструкций, отправка логов
  components/
    ui/                 // Базовые UI-атомы (кнопка, текст, бэйдж)
    common/             // Общие обёртки: лейаут, загрузка, ошибки
  navigation/           // Конфигурация стека и табов
  services/             // Работа с AsyncStorage и другими сервисами
  hooks/                // Глобальный state-контекст приложения
  types/                // Типы профиля, навигации и настроек
  utils/                // Утилиты (темы и пр.)
```

## Запуск
```bash
npm install
npm start
```
Откройте приложение через Expo Go или эмулятор по QR-коду/ссылке из терминала.

> Примечание: в репозитории нет бинарных изображений. Expo использует свои стандартные иконки и splash-экран. При необходимости добавьте PNG-файлы в `assets/` и укажите пути в `app.json`.

### Сборка APK (Android)
Рекомендуемый путь — EAS:
```bash
npm install -g eas-cli
npx eas login
npx eas build --platform android
```
(По умолчанию собирается APK/АAB без собственного backend.)

### Команды
- `npm start` — запуск Expo Dev Tools
- `npm run android` — сборка/запуск на эмуляторе или подключённом Android
- `npm run ios` — запуск в симуляторе iOS (macOS)
- `npm run lint` — ESLint с строгими правилами
- `npm run format` — форматирование Prettier

## Ключевые файлы
- `App.tsx` — подключение контекста состояния, тема Paper, корневая навигация.
- `src/navigation/AppNavigator.tsx` — стек Onboarding/Login/MainTabs и табы (Home, Instructions, Profile, Settings).
- `src/services/storageService.ts` — типизированные геттеры/сеттеры AsyncStorage (онбординг, профиль, тема, флаги).
- `src/components/ui` — AppButton, AppText, StatusBadge.
- `src/components/common` — ScreenLayout с общим Header, ErrorState, LoadingOverlay.

### Проверка Яндекс.Карт (map.html)
- `map.html` — отдельная страница для быстрой диагностики загрузки Yandex Maps API 3.0.
- Показывает статус загрузки, ловит ошибки `ymaps`/bundle и подсказывает, как поправить CSP (`script-src`/`script-src-elem`).
- Замените `ВАШ_API_KEY` на ключ организации и откройте файл локально или на сервере, где применяется ваша CSP.

## Экранная логика
- **Onboarding** — два слайда с описанием приложения, кнопка «Продолжить», сохранение флага в AsyncStorage.
- **Login** — поля ID/телефон/пин, простая валидация, сохранение профиля (заглушка) в AsyncStorage.
- **Home** — визуальный статус VPN (без низкоуровневого управления), кнопки открытия клиента (deeplink/подсказка), переход к инструкции, проверка доступа через запрос, быстрый блок профиля.
- **Instructions** — список шагов, прокрутка, акцент на официальном клиенте.
- **Profile** — данные водителя и VPN-параметры, кнопка «Скопировать данные» (Clipboard).
- **Settings** — выбор темы (с сохранением), флаг «Показывать инструкцию при запуске», заглушка отправки лога.

## Что ещё доработать для боевой интеграции
- Подключить реальный API компании: авторизация, выдача профиля и конфигураций VPN.
- Проверку статуса VPN делать через бекенд или SDK клиента (если есть API), а не по действиям пользователя.
- Добавить защищённое хранение чувствительных данных (SecureStore/Keychain) и обновление сертификатов.
- Реализовать отправку логов в Service Desk (почта/HTTP), трекинг ошибок (Sentry/Expo Updates).
- Добавить локализацию (i18n) и управление deeplink/intent под Android/iOS.

